{"ast":null,"code":"import _regeneratorRuntime from\"/Users/jgersch/CSU Classes/CS458 Spring 2021/Projects/CryptoZombiesGame2021/zombiedapp/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/jgersch/CSU Classes/CS458 Spring 2021/Projects/CryptoZombiesGame2021/zombiedapp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/jgersch/CSU Classes/CS458 Spring 2021/Projects/CryptoZombiesGame2021/zombiedapp/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/jgersch/CSU Classes/CS458 Spring 2021/Projects/CryptoZombiesGame2021/zombiedapp/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/jgersch/CSU Classes/CS458 Spring 2021/Projects/CryptoZombiesGame2021/zombiedapp/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/jgersch/CSU Classes/CS458 Spring 2021/Projects/CryptoZombiesGame2021/zombiedapp/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/jgersch/CSU Classes/CS458 Spring 2021/Projects/CryptoZombiesGame2021/zombiedapp/node_modules/@babel/runtime/helpers/esm/inherits\";//\n// This is the \"Transfer Zombie\" page\n//\nimport React,{Component}from\"react\";import{Link}from\"react-router-dom\";import{connect}from\"react-redux\";import{Button,Header,Icon,Form,Message}from\"semantic-ui-react\";import ZombieCard from\"../components/zombieCard\";function mapStateToProps(state){return{CZ:state.CZ,userAddress:state.userAddress};}var TransferZombie=/*#__PURE__*/function(_Component){_inherits(TransferZombie,_Component);function TransferZombie(){var _getPrototypeOf2;var _this;_classCallCheck(this,TransferZombie);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(TransferZombie)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={value:\"\",message:\"\",errorMessage:\"\",loading:false,zombieId:null};_this.onSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();_this.setState({loading:true,errorMessage:\"\",message:\"waiting for blockchain transaction to complete...\"});_context.prev=2;_context.next=5;return _this.props.CZ.transferFrom(_this.props.userAddress,_this.state.value,_this.state.zombieId);case 5:// from, to, ID\n_this.setState({loading:false,message:\"Yay!!!!  I have a brand new owner!\"});_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](2);_this.setState({loading:false,errorMessage:_context.t0.message,message:\"User rejected transaction\"});case 11:case\"end\":return _context.stop();}}},_callee,null,[[2,8]]);}));return function(_x){return _ref.apply(this,arguments);};}();return _this;}_createClass(TransferZombie,[{key:\"componentDidMount\",// get a random cryptokitty image and the hungry zombie ID when the component mounts\nvalue:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var zombieId;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:zombieId=+this.props.location.state.zombieId;this.setState({zombieId:zombieId});case 2:case\"end\":return _context2.stop();}}},_callee2,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"render\",value:function render(){var _this2=this;return React.createElement(\"div\",null,\"*\",React.createElement(Header,{icon:\"browser\",content:\"Please give me a nice new owner!!\"}),React.createElement(\"table\",null,React.createElement(\"tr\",null,React.createElement(\"th\",null,React.createElement(ZombieCard,{zombieId:this.state.zombieId,zombieName:this.props.location.state.zombieName,zombieDNA:this.props.location.state.zombieDNA,zombieLevel:this.props.location.state.zombieLevel,zombieReadyTime:this.props.location.state.zombieReadyTime,zombieWinCount:this.props.location.state.zombieWinCount,zombieLossCount:this.props.location.state.zombieLossCount,zombieOwner:this.props.userAddress,myOwner:false})),React.createElement(\"th\",null,React.createElement(\"img\",{src:\"static/images/newOwnership.jpg\",alt:\"under new ownership\"})))),React.createElement(\"br\",null),React.createElement(Form,{onSubmit:this.onSubmit,error:!!this.state.errorMessage},React.createElement(Form.Field,null,React.createElement(\"label\",null,\"Enter New Owner Ethereum Address\"),React.createElement(\"input\",{placeholder:\"Address\",onChange:function onChange(event){return _this2.setState({value:event.target.value});}})),React.createElement(Message,{error:true,header:\"Oops!\",content:this.state.errorMessage}),React.createElement(Button,{primary:true,type:\"submit\",loading:this.state.loading},React.createElement(Icon,{name:\"check\"}),\"Transfer Zombie\"),React.createElement(Link,{to:\"/MyZombieInventory\"},React.createElement(Button,{color:\"red\",inverted:true},React.createElement(Icon,{name:\"cancel\"}),\" Close\")),React.createElement(\"hr\",null),React.createElement(\"h2\",null,this.state.message)));}}]);return TransferZombie;}(Component);export default connect(mapStateToProps)(TransferZombie);","map":{"version":3,"sources":["/Users/jgersch/CSU Classes/CS458 Spring 2021/Projects/CryptoZombiesGame2021/zombiedapp/src/pages/TransferZombie.js"],"names":["React","Component","Link","connect","Button","Header","Icon","Form","Message","ZombieCard","mapStateToProps","state","CZ","userAddress","TransferZombie","value","message","errorMessage","loading","zombieId","onSubmit","event","preventDefault","setState","props","transferFrom","location","zombieName","zombieDNA","zombieLevel","zombieReadyTime","zombieWinCount","zombieLossCount","target"],"mappings":"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","sourcesContent":["//\n// This is the \"Transfer Zombie\" page\n//\n\nimport React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport { Button, Header, Icon, Form, Message } from \"semantic-ui-react\";\nimport ZombieCard from \"../components/zombieCard\";\n\nfunction mapStateToProps(state) {\n  return {\n    CZ: state.CZ,\n    userAddress: state.userAddress\n  };\n}\n\nclass TransferZombie extends Component {\n  state = {\n    value: \"\",\n    message: \"\",\n    errorMessage: \"\",\n    loading: false,\n    zombieId: null\n  };\n\n  // get a random cryptokitty image and the hungry zombie ID when the component mounts\n\n  async componentDidMount() {\n    let zombieId = +this.props.location.state.zombieId;\n    this.setState({\n      zombieId\n    });\n  }\n\n  onSubmit = async event => {\n    event.preventDefault();\n    this.setState({\n      loading: true,\n      errorMessage: \"\",\n      message: \"waiting for blockchain transaction to complete...\"\n    });\n    try {\n      await this.props.CZ\n        .transferFrom(this.props.userAddress, this.state.value, this.state.zombieId) // from, to, ID\n      this.setState({\n        loading: false,\n        message: \"Yay!!!!  I have a brand new owner!\"\n      });\n    } catch (err) {\n      this.setState({\n        loading: false,\n        errorMessage: err.message,\n        message: \"User rejected transaction\"\n      });\n    }\n  };\n\n  render() {\n    return (\n      <div>\n        *<Header icon=\"browser\" content=\"Please give me a nice new owner!!\" />\n        <table>\n          <tr>\n            <th>\n              <ZombieCard\n                zombieId={this.state.zombieId}\n                zombieName={this.props.location.state.zombieName}\n                zombieDNA={this.props.location.state.zombieDNA}\n                zombieLevel={this.props.location.state.zombieLevel}\n                zombieReadyTime={this.props.location.state.zombieReadyTime}\n                zombieWinCount={this.props.location.state.zombieWinCount}\n                zombieLossCount={this.props.location.state.zombieLossCount}\n                zombieOwner={this.props.userAddress}\n                myOwner={false}\n              />\n            </th>\n            <th>\n              <img src=\"static/images/newOwnership.jpg\" alt=\"under new ownership\" />\n            </th>\n          </tr>\n        </table>\n        <br />\n        <Form onSubmit={this.onSubmit} error={!!this.state.errorMessage}>\n          <Form.Field>\n            <label>Enter New Owner Ethereum Address</label>\n            <input\n              placeholder=\"Address\"\n              onChange={event =>\n                this.setState({\n                  value: event.target.value\n                })\n              }\n            />\n          </Form.Field>\n          <Message error header=\"Oops!\" content={this.state.errorMessage} />\n          <Button primary type=\"submit\" loading={this.state.loading}>\n            <Icon name=\"check\" />\n            Transfer Zombie\n          </Button>\n          <Link to=\"/MyZombieInventory\">\n            <Button color=\"red\" inverted>\n              <Icon name=\"cancel\" /> Close\n            </Button>\n          </Link>\n          <hr />\n          <h2>{this.state.message}</h2>\n        </Form>\n      </div>\n    );\n  }\n}\n\nexport default connect(mapStateToProps)(TransferZombie);\n"]},"metadata":{},"sourceType":"module"}