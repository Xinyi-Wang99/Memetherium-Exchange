{"ast":null,"code":"import _regeneratorRuntime from\"/Users/jgersch/CSU Classes/CS458 Spring 2021/Projects/CryptoZombiesGame2021/zombiedapp/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/jgersch/CSU Classes/CS458 Spring 2021/Projects/CryptoZombiesGame2021/zombiedapp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/jgersch/CSU Classes/CS458 Spring 2021/Projects/CryptoZombiesGame2021/zombiedapp/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/jgersch/CSU Classes/CS458 Spring 2021/Projects/CryptoZombiesGame2021/zombiedapp/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/jgersch/CSU Classes/CS458 Spring 2021/Projects/CryptoZombiesGame2021/zombiedapp/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/jgersch/CSU Classes/CS458 Spring 2021/Projects/CryptoZombiesGame2021/zombiedapp/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/jgersch/CSU Classes/CS458 Spring 2021/Projects/CryptoZombiesGame2021/zombiedapp/node_modules/@babel/runtime/helpers/esm/inherits\";//\n// This is the \"Level Up\" page\n//\nimport React,{Component}from\"react\";import{Link}from\"react-router-dom\";import{connect}from\"react-redux\";import{Button,Header,Icon,Form,Message}from\"semantic-ui-react\";import ZombieCard from\"../components/zombieCard\";import{ethers}from\"ethers\";function mapStateToProps(state){return{web3Instance:state.web3Instance,CZ:state.CZ,userAddress:state.userAddress};}var LevelUp=/*#__PURE__*/function(_Component){_inherits(LevelUp,_Component);function LevelUp(){var _getPrototypeOf2;var _this;_classCallCheck(this,LevelUp);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(LevelUp)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={value:\"\",message:\"\",errorMessage:\"\",loading:false,zombieId:null};_this.onSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();_this.setState({loading:true,errorMessage:\"\",message:\"waiting for blockchain transaction to complete...\"});_context.prev=2;_context.next=5;return _this.props.CZ.levelUp(_this.state.zombieId,{value:ethers.utils.parseEther(\".001\")});case 5:_this.setState({loading:false,message:\"Yay!!!!  I have more power!\"});_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](2);_this.setState({loading:false,errorMessage:_context.t0.message,message:\"User rejected transaction\"});case 11:case\"end\":return _context.stop();}}},_callee,null,[[2,8]]);}));return function(_x){return _ref.apply(this,arguments);};}();return _this;}_createClass(LevelUp,[{key:\"componentDidMount\",// get a random cryptokitty image and the hungry zombie ID when the component mounts\nvalue:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var zombieId;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:zombieId=+this.props.location.state.zombieId;this.setState({zombieId:zombieId});case 2:case\"end\":return _context2.stop();}}},_callee2,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"render\",value:function render(){return React.createElement(\"div\",null,\"*\",React.createElement(Header,{icon:\"browser\",content:\"Please buy me some super-strength!!  It only costs .001 ether.\"}),React.createElement(\"table\",null,React.createElement(\"tr\",null,React.createElement(\"th\",null,React.createElement(ZombieCard,{zombieId:this.state.zombieId,zombieName:this.props.location.state.zombieName,zombieDNA:this.props.location.state.zombieDNA,zombieLevel:this.props.location.state.zombieLevel,zombieReadyTime:this.props.location.state.zombieReadyTime,zombieWinCount:this.props.location.state.zombieWinCount,zombieLossCount:this.props.location.state.zombieLossCount,zombieOwner:this.props.userAddress,myOwner:false})),React.createElement(\"th\",null,React.createElement(\"img\",{src:\"static/images/LevelUp.jpg\",width:\"400px\",alt:\"LevelUp\"})))),React.createElement(\"br\",null),React.createElement(Form,{onSubmit:this.onSubmit,error:!!this.state.errorMessage},React.createElement(Message,{error:true,header:\"Oops!\",content:this.state.errorMessage}),React.createElement(Button,{primary:true,type:\"submit\",loading:this.state.loading},React.createElement(Icon,{name:\"check\"}),\"Level up!\"),React.createElement(Link,{to:\"/MyZombieInventory\"},React.createElement(Button,{color:\"red\",inverted:true},React.createElement(Icon,{name:\"cancel\"}),\" Close\")),React.createElement(\"hr\",null),React.createElement(\"h2\",null,this.state.message)));}}]);return LevelUp;}(Component);export default connect(mapStateToProps)(LevelUp);","map":{"version":3,"sources":["/Users/jgersch/CSU Classes/CS458 Spring 2021/Projects/CryptoZombiesGame2021/zombiedapp/src/pages/LevelUp.js"],"names":["React","Component","Link","connect","Button","Header","Icon","Form","Message","ZombieCard","ethers","mapStateToProps","state","web3Instance","CZ","userAddress","LevelUp","value","message","errorMessage","loading","zombieId","onSubmit","event","preventDefault","setState","props","levelUp","utils","parseEther","location","zombieName","zombieDNA","zombieLevel","zombieReadyTime","zombieWinCount","zombieLossCount"],"mappings":"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","sourcesContent":["//\n// This is the \"Level Up\" page\n//\n\nimport React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport { Button, Header, Icon, Form, Message } from \"semantic-ui-react\";\nimport ZombieCard from \"../components/zombieCard\";\n\nimport { ethers } from \"ethers\";\n\nfunction mapStateToProps(state) {\n  return {\n    web3Instance: state.web3Instance,\n    CZ: state.CZ,\n    userAddress: state.userAddress\n  };\n}\n\nclass LevelUp extends Component {\n  state = {\n    value: \"\",\n    message: \"\",\n    errorMessage: \"\",\n    loading: false,\n    zombieId: null\n  };\n\n  // get a random cryptokitty image and the hungry zombie ID when the component mounts\n\n  async componentDidMount() {\n    let zombieId = +this.props.location.state.zombieId;\n    this.setState({\n      zombieId\n    });\n  }\n\n  onSubmit = async event => {\n    event.preventDefault();\n    this.setState({\n      loading: true,\n      errorMessage: \"\",\n      message: \"waiting for blockchain transaction to complete...\"\n    });\n    try {\n      await this.props.CZ\n        .levelUp(this.state.zombieId, {value: ethers.utils.parseEther(\".001\")})\n      this.setState({\n        loading: false,\n        message: \"Yay!!!!  I have more power!\"\n      });\n    } catch (err) {\n      this.setState({\n        loading: false,\n        errorMessage: err.message,\n        message: \"User rejected transaction\"\n      });\n    }\n  };\n\n  render() {\n    return (\n      <div>\n        *\n        <Header\n          icon=\"browser\"\n          content=\"Please buy me some super-strength!!  It only costs .001 ether.\"\n        />\n        <table>\n          <tr>\n            <th>\n              <ZombieCard\n                zombieId={this.state.zombieId}\n                zombieName={this.props.location.state.zombieName}\n                zombieDNA={this.props.location.state.zombieDNA}\n                zombieLevel={this.props.location.state.zombieLevel}\n                zombieReadyTime={this.props.location.state.zombieReadyTime}\n                zombieWinCount={this.props.location.state.zombieWinCount}\n                zombieLossCount={this.props.location.state.zombieLossCount}\n                zombieOwner={this.props.userAddress}\n                myOwner={false}\n              />\n            </th>\n            <th>\n              <img\n                src=\"static/images/LevelUp.jpg\"\n                width=\"400px\"\n                alt=\"LevelUp\"\n              />\n            </th>\n          </tr>\n        </table>\n        <br />\n        <Form onSubmit={this.onSubmit} error={!!this.state.errorMessage}>\n          <Message error header=\"Oops!\" content={this.state.errorMessage} />\n          <Button primary type=\"submit\" loading={this.state.loading}>\n            <Icon name=\"check\" />\n            Level up!\n          </Button>\n          <Link to=\"/MyZombieInventory\">\n            <Button color=\"red\" inverted>\n              <Icon name=\"cancel\" /> Close\n            </Button>\n          </Link>\n          <hr />\n          <h2>{this.state.message}</h2>\n        </Form>\n      </div>\n    );\n  }\n}\n\nexport default connect(mapStateToProps)(LevelUp);\n"]},"metadata":{},"sourceType":"module"}